/*! 
* WeX5 v3 (http://www.justep.com) 
* Copyright 2015 Justep, Inc.
* Licensed under Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0) 
*/

define("$model/UI2/system/components/designerCommon/js/xuiService",["require","jquery","$UI/system/lib/base/xml","$UI/system/components/designerCommon/js/webSocketMng"],function(e){function u(e){return e?e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]}):e}function f(e,t){var n=["d_selectable","d_canmove","d_canaddchild","d_canremove","componentName","d_resizable"];for(var r=0;r<n.length;r++)t.getAttribute(n[r])||t.setAttribute(n[r],e.getAttribute(n[r]))}function l(e,t,n,r){return n=n||{},n.filePath=s.getRequestParameter("filePath"),s._callJava(e,t,n,r)}var t=e("jquery"),n=0,r=0,i=e("$UI/system/lib/base/xml"),s=e("$UI/system/components/designerCommon/js/webSocketMng"),o="com.justep.designer.service.XuiService",n=0;window.errorCallBack=function(e){alert(e)};var a=function(e){var r=e.data,s=this.rowNodePath=e.rowNodePath,o=this.rowIdPath=e.rowIdPath,u=this.binding=e.binding,a=e.rootPath;this.idField=e.idField||r.idColumn;var f=t(i.fromString(e.xmlData).documentElement);if(a){var l=t(">"+a,f);l.length==0&&(l=this.createNodeByPath(f,a)),f=l}var c=this.$rootNode=f;s&&(c=t(">"+s,f));var h=this;c.each(function(){var e=t(this),i=e.attr("xid");i||(i="xid_"+(new Date).getTime()+"_"+n++,e.attr("xid",i));var s={};for(var a in u){var f=h.getValue(u[a],e);f&&(s[a]=f)}if(o){var l=h.getValue(o,e);if(!l)return;var c=r.find([h.idField],[l],!0);if(c&&c.length>0){for(var a in s)r.setValue(a,s[a],c[0]);return}s[h.idField]=l}r.add(s)}),this.installListener(this,r)};a.prototype={installListener:function(e,t){t.on("onValueChanged",function(n){var r=e.binding[n.col];if(r){var i=t.getValue(e.idField,n.row),s=e.findNodeByRowIdPath(e.rowIdPath,i);if(!s||s.length==0)s=e.createNodeByPath(e.$rootNode,e.rowNodePath,!0),e.rowIdPath&&e.setValue(e.rowIdPath,i,s);e.setValue(r,n.value,s)}}),t.on("onAfterDelete",function(t){var n=t.deleteRows;for(var r=0;r<n.length;r+=1){var i=n[r],s=i.val(e.idField);e.findNodeByRowIdPath(e.rowIdPath,s).remove()}}),t.on("onAfterNew",function(t){var r=t.rows;for(var i=0;i<r.length;i+=1){var s=r[i],o=s.val(e.idField),u=e.findNodeByRowIdPath(e.rowIdPath,o);if(!u||u.length==0)u=e.createNodeByPath(e.$rootNode,e.rowNodePath,!0),o=o||"xid_"+(new Date).getTime()+"_"+n++,e.rowIdPath&&e.setValue(e.rowIdPath,o,u),s.val(e.idField,o);for(var a in e.binding){var f=s.val(a);f!==undefined&&e.setValue(e.binding[a],f,u)}}}),t.on("onDataChange",function(t){if(t.type=="exchangeRow"){var n=t.row1,r=t.row2,i=n.val(e.idField),s=r.val(e.idField),o=e.findNodeByRowIdPath(e.rowIdPath,i),u=e.findNodeByRowIdPath(e.rowIdPath,s);if(o&&o.length>0&&u&&u.length>0){var a=o.clone(!0),f=u.clone(!0);o.before(f),u.before(a),o.remove(),u.remove()}}})},findNodeByRowIdPath:function(e,n){var r=this.$rootNode,i=this,s;return this.rowNodePath&&(r=t(this.rowNodePath,r),r.each(function(){var r=t(this),o=i.getValue(e,r);if(o==n)return s=r,!1})),s},getValue:function(e,n){n=n||this.$rootNode;var r=e.split(">"),i=n;for(var s=0;s<r.length;s+=1){var o=r[s];if(!o)continue;if(o.substring(0,1)=="@")return i.attr(o.substring(1));i=t(">"+o,i)}var u="";return i.getText?u=i.getText():u=i.text(),t.trim(u)},createNode:function(e,n){var r=e[0].ownerDocument.createElement(n);return e[0].appendChild(r),t(r)},createNodeByPath:function(e,n,r){if(!n)return;var i=n.split(">"),s=e;for(var o=0;o<i.length;o+=1){var u=i[o];if(!u)continue;if(u.substring(0,1)=="@")continue;var a=t(">"+i[o],s);a.length==0||r?s=this.createNode(s,i[o]):s=a}return s},removeTextNode:function(e){var t=e.childNodes;for(var n=t.length-1;n>=0;n-=1){var r=t[n],i=r.nodeType;(i==3||i==4)&&e.removeChild(r)}},setValue:function(e,t,n){n=n||this.$rootNode;var r=this.getValue(e,n);if(r==t)return;var i=this.createNodeByPath(n,e),s=e.split(">"),o=s[s.length-1];o.substring(0,1)!="@"?(this.removeTextNode(i[0]),t?i[0].appendChild(i[0].ownerDocument.createCDATASection(t)):i.text(t)):i.attr(o.substring(1),t)},buildXmlStr:function(e,n){n||(n=[]);var r=e.tagName;n.push("<"+r);var i=e.attributes;for(var s=0;s<i.length;s+=1){var o=i[s],a=u(o.value);n.push(" "+o.name+'="'+a+'"')}var f=e.childNodes;f.length>0&&n.push(">");for(var s=0;s<f.length;s+=1){var l=f[s],c=l.nodeType;if(c==1)this.buildXmlStr(l,n);else if(c==3||c==4){var a=t.trim(l.nodeValue);a&&n.push("<![CDATA["+l.nodeValue+"]]>")}}return f.length>0?n.push("</"+r+">"):n.push(" />"),n.join("")},asXml:function(){var e=this.buildXmlStr(this.$rootNode[0]);return e},childAsXml:function(){var e=this.buildXmlStr(this.$rootNode[0]);return e},childAsArray:function(){var e=[],t=this;return this.$rootNode.children().each(function(){e.push(t.buildXmlStr(this))}),e}};var c={callJava:l,getFilePath:function(){return s.getRequestParameter("filePath")},getNodeByDId:function(e){var t=this.callJava(o,"getModelNodeByDId",{d_id:e,async:!1});return t},selectNodes:function(e){var t=this.callJava(o,"selectModelNodes",{async:!1,xpath:e});return t},genaXId:function(e){var t=this.callJava(o,"genaXId",{async:!1,componentName:e});return t},getTemplate:function(e){var t=this.callJava(o,"getTemplate",{async:!1,componentName:e});return t},getConfig:function(e){var t=this.callJava(o,"getConfig",{async:!1,componentName:e});if(t)return i.fromString(t).documentElement},createComponent:function(e,n,r,i){r=r||{},r.componentName=e,r.parentElementId=typeof n!="string"?n.domNode.getAttribute("d_id"):n;var s=null;i&&(s=function(e){e.xml?i(t(e.xml).get(0)):i(e)}),this.callJava(o,"createComponent",{asyn:!0,config:r},s)},batchCreateComponent:function(e,n){debugger;var r=null;n&&(r=function(e){e.xml?n(t(e.xml).get(0)):n(e)}),this.callJava(o,"batchCreateComponent",{asyn:!0,config:e},r)},callMethod:function(e,t,n,r){typeof e!="string"&&(e=e.domNode.getAttribute("d_id")),this.callJava(o,"callMethod",{d_id:e,targetMethod:t,config:n},r)},deleteComponent:function(e,n,r){n=n||{};var i=[];for(var s=0;s<e.length;s+=1){var u=e[s];typeof u!="string"&&(e[s]=u.domNode.getAttribute("d_id")),i.push(t("*[d_id='"+e[s]+"']").getPath())}n.paths=i,n.ids=e,c.callJava(o,"deleteComponent",n,r)},set:function(e,t,n){typeof e!="string"&&(e=e.domNode.getAttribute("d_id")),this.callJava(o,"set",{d_id:e,config:t},n)},get:function(e,t){return typeof e!="string"&&(e=e.domNode.getAttribute("d_id")),this.callJava(o,"get",{d_id:e,async:!1,name:t})},updateProperties:function(e,n,r,i){var s=[],u=[];return e.each(function(){var e=this.getAttribute("d_id");if(e){s.push(e);var i={};u.push(i);if(n&&!r)for(var o=0;o<n.length;o+=1)i[n[o]]=this.getAttribute(n[o])||"";else{var a=this.attributes;for(var o=0;o<a.length;o+=1){var f=a[o].name;if(f.substring(0,2)=="d_"||f=="component"||f=="componentname"||f=="id")continue;if(r&&n&&t.inArray(f,n)!=-1)continue;var l=a[o].value;f=="class"&&l&&(l=l.replace("xui-hignlight-selected","")),i[f]=l}}}}),this.callJava(o,"updateProperties",{d_ids:s,properties:u},i)},asXml:function(e,n,r){r=r||[];var i=e.tagName.toLowerCase();r.push("<"+i+" ");var s=e.attributes;for(var o in s){var u=s[o];if(u.value!==undefined){if(n&&t.inArray(u.name,n)!=-1)continue;r.push(" "+u.name+'="'+u.value+'" ')}}var a=e.childNodes;a.length>0?r.push(">"):r.push("/>");for(var f=0;f<a.length;f+=1){var l=a[f];l.nodeType==1?this.asXml(l,n,r):l.nodeType==3&&r.push(l.nodeValue)}return a.length>0&&r.push("</"+i+">"),r},updateNodes:function(e,r,i){var s=[],u=this;e.each(function(){var e=this.getAttribute("d_id");e||this.setAttribute("d_id","d_id_js_"+n++),t("*",this).each(function(){if(this.getAttribute("d_updatable")!="false"){var e=this.getAttribute("d_id");e||this.setAttribute("d_id","d_id_js_"+idx++)}});var i=this.cloneNode(!0);t(i).removeClass("xui-hignlight-selected active"),i.setAttribute("d_parentDId",this.parentNode.getAttribute("d_id"));var o=t(this).nextElement();o&&i.setAttribute("d_nextDId",o.getAttribute("d_id"));var a=t(this).prevElement();a&&i.setAttribute("d_prevDId",a.getAttribute("d_id")),s.push(u.asXml(i,r).join(""))});var a=function(e){var n=e.nodeList;for(var r=0;r<n.length;r+=1){var s=t(n[r]),o=s.attr("d_id"),u=t("*[d_id='"+o+"']:first");u.length>0&&f(s[0],u[0]),t("*",s).each(function(){var e=t("*[d_id='"+this.getAttribute("d_id")+"']:first");e.length>0&&f(this,e[0])})}i&&i.call(window,e)};return this.callJava(o,"udpateDomNodes",{contents:s},a)},updateText:function(e,n,r){var i={};return e.each(function(){var e=t(this),n=this.childNodes,r=[];for(var s=0;s<n.length;s+=1){var o=n[s];o.nodeType==3&&r.push(o.nodeValue)}i[e.attr("d_id")]=r.join("")}),this.callJava(o,"updateText",{isCDATA:n,textMap:i},r)},replaceChild:function(e,t,n,r){return typeof e!="string"&&(e=e.domNode.getAttribute("d_id")),n=n||{},n.childTemplate=t,n.d_id=e,this.callJava(o,"replaceChild",n,r)},repaintComponent:function(e,t){typeof e!="string"&&(e=e.domNode.getAttribute("d_id")),this.callJava(o,"repaintComponent",{d_id:e},t)},move:function(e,t,n,r){typeof e!="string"&&(e=e.domNode.getAttribute("d_id")),t&&typeof t!="string"&&(t=t.domNode.getAttribute("d_id")),n&&typeof n!="string"&&(n=n.domNode.getAttribute("d_id")),this.callJava(o,"move",{d_id:e,targetId:t,refId:n})},getAllOperations:function(e){return this.callJava(o,"getAllOperations",{async:!0},e)},getEditorDataSource:function(e,t,n){return this.callJava(o,"getEditorDataSource",{async:!1,method:e,d_id:n,propertyItem:t})},setCSS:function(e,t){return typeof e!="string"&&(e=e.domNode.getAttribute("d_id")),this.callJava(o,"setCSS",{d_id:e,config:t})},batchSetCSS:function(e,t){return this.callJava(o,"batchSetCSS",{d_ids:e,config:t})},getXuiService:function(){return h}},h={callJava:l,regComponents:function(e){if(!window.componentConfig)return;for(var t in e)componentConfig[t]["js-class"]=e[t]},openPage:function(e,t,n){e.substring(0,3)=="$UI"&&(e="$model/"+e);var r="",i=window.location.href,s=i.indexOf("#");s!=-1&&(r=i.substring(s),i=i.substring(0,s));var u=i.indexOf("?");u!=-1&&(e.indexOf("?")==-1?e+=i.substring(u):e=e+"&"+i.substring(u+1)),r&&(i+=r),t=t||{},this.callJava(o,"openPage",{url:e,pageParams:t},n)},openEditor:function(e,t,n){this.callJava(o,"openEditor",{name:e,params:t},n)},pageOkAction:function(e){e=e||{},e.returnValue&&typeof e.returnValue=="object"&&(e.returnValue=JSON.stringify(e.returnValue)),e.pageId=e.pageId||s.getRequestParameter("pageId"),this.callJava(o,"pageOkAction",e)},pageApplyAction:function(e){e=e||{},e.returnValue&&typeof e.returnValue=="object"&&(e.returnValue=JSON.stringify(e.returnValue)),e.pageId=e.pageId||s.getRequestParameter("pageId"),this.callJava(o,"pageApplyAction",e)},pageCloseAction:function(e){e=e||{},e.pageId=e.pageId||s.getRequestParameter("pageId"),this.callJava(o,"pageCloseAction",e)},getPageParams:function(e){e=e||s.getRequestParameter("pageId");var t=this.callJava(o,"getPageParams",{async:!1,pageId:e});return t},getXuiDoc:function(){return c},createExcelFile:function(e){e.async=!1,this.callJava(o,"createExcelFile",e)},saveXmlExcelAsBinaryFile:function(n){var r=e.toUrl("$UI/system/templates/server/XmlToExcel.j"),i={pathname:n};t.ajax({async:!1,data:i,dataType:"json",type:"POST",url:r,success:function(e){},error:function(e,t,n){var r="ajax请求出错："+[t,e.readyState,n];console.log(r)}})},getAllAppNames:function(){var e=this.callJava(o,"getAllAppNames",{async:!1});return e},createXmlModel:function(e){return new a(e)},loginPaas:function(e,t){var n=this.callJava(o,"setLonginConfig",e,t)},setNoDisplay:function(e,t){var n=this.callJava(o,"setLonginConfig",e,t)}};return h}),define("$model/UI2/system/components/designerCommon/js/bizModelService",["require","$UI/system/components/designerCommon/js/webSocketMng"],function(e){function r(e,n,r,i){return r=r||{},r.filePath=t.getRequestParameter("filePath"),r.async=!1,t._callJava(e,n,r,i)}var t=e("$UI/system/components/designerCommon/js/webSocketMng"),n="com.justep.designer.service.BizModelService";window.errorCallBack=function(e){alert(e)};var i=function(e){this.modelPath=e};i.prototype={_callMethod:function(e,t,i){var s={targetMethod:e,modelPath:this.modelPath,params:t,returnAllProperty:i};return r(n,"callMethod",s)},get:function(e,t,i){var s={ownerMElement:e,async:!1,modelPath:this.modelPath,propName:t,returnAllProperty:i};return r(n,"get",s)},getBasePath:function(){return this._callMethod("getBasePath")},getName:function(){return this._callMethod("getName")},getStoreList:function(){return this._callMethod("getStoreList")},getRelationList:function(e){return this._callMethod("getRelationList")},getConceptList:function(){return this._callMethod("getConceptList")},getMappingList:function(){return this._callMethod("getMappingList")},getListenerList:function(){return this._callMethod("getListenerList")},getProcedureList:function(){return this._callMethod("getProcedureList")},getProcessList:function(){return this._callMethod("getProcessList")},getTemplateList:function(){return this._callMethod("getTemplateList")},getActionList:function(){return this._callMethod("getActionList")},getFnList:function(){return this._callMethod("getFnList")},getDataSource:function(){return this._callMethod("getDataSource")},getConfigList:function(){return this._callMethod("getConfigList")},findConcept:function(e,t){return t!==!1&&(t=!0),this._callMethod("findConcept",[e],t)},findRelation:function(e,t){return t!==!1&&(t=!0),this._callMethod("findRelation",[e],t)},findMapping:function(e,t){return t!==!1&&(t=!0),this._callMethod("findMapping",[e],t)},findAction:function(e,t){return t!==!1&&(t=!0),this._callMethod("findAction",[e],t)},findProcess:function(e,t){return t!==!1&&(t=!0),this._callMethod("findProcess",[e],t)},findStore:function(e,t){return t!==!1&&(t=!0),this._callMethod("findStore",[e],t)},findTemplate:function(e,t){return t!==!1&&(t=!0),this._callMethod("findTemplate",[e],t)},findProcedure:function(e,t){return t!==!1&&(t=!0),this._callMethod("findProcedure",[e],t)},findDataType:function(e,t,n){return n!==!1&&(n=!0),this._callMethod("findDataType",[e,t],n)},findLabelByContextLanauge:function(e,t,n){return n!==!1&&(n=!0),this._callMethod("findLabelByContextLanauge",[e,t],n)}};var s={callJava:r,parseModel:function(e){return new i(e)},getAllAppNames:function(){return r(n,"getAllAppNames",{})},getDBTables:function(e){return r(n,"getDBTables",{dsName:e})},getTableFields:function(e,t){return r(n,"getTableFields",{dsName:e,tableName:t})}};return s}),define("$model/UI2/system/components/html/designer/html",["require","jquery","$UI/system/lib/base/viewComponent","$UI/system/components/designerCommon/js/xuiService"],function(e){var t=e("jquery"),n=e("$UI/system/lib/base/viewComponent"),r=e("$UI/system/components/designerCommon/js/xuiService"),i=r.getXuiDoc(),s=n.extend({init:function(e,n){this.callParent(e,n),this.$domNode=t(this.domNode),i.getLabel?this.$domNode.text(i.getLabel(this.$domNode.attr("d_id"),this.$domNode.attr("bind-text"))):this.$domNode.text(this.$domNode.attr("bind-text"))},set:function(e){var t;if("bind-text"in e){var n=i.get(this,"text");t=e["bind-text"],t&&i.getLabel&&(t=i.getLabel(this.$domNode.attr("d_id"),t)),this.$domNode.text(t?t:n)}else"text"in e&&(t=i.get(this,"bind-text"),t||this.$domNode.text(e.text))}}),o=n.extend({init:function(e,n){this.callParent(e,n),this.$domNode=t(this.domNode);if(this.$domNode.attr("src"))this.$domNode.attr("src",this.buildSrc(this.$domNode.attr("src")));else{var r=this.$domNode.attr("bind-attr-src");if(r&&r.indexOf("require.")!=-1){var i=r.indexOf("("),s=r.indexOf(")");r=r.substring(i+2,s-1),this.$domNode.attr("src",r)}}},buildSrc:function(t){return t&&t.indexOf("$UI")!=-1&&(t=e.toUrl(t)),t||""},set:function(e){"src"in e&&this.$domNode.attr("src",this.buildSrc(e.src))}}),u={"input(button)":{xdoc:"<b>使用场景:</b>页面普通按钮;<br/><b>使用方法:</b>添加标签后，自定义操作",properties:["xid","value","disabled",{name:"bind-value",text:"动态值",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-click",text:"点击事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"reset(html)":{xdoc:"<b>使用场景:</b>重置页面输入的所有内容;<br/><b>使用方法:</b>添加标签后，可以对页面输入的内容进行重置，或者自定义事件",properties:["xid","value","disabled","name",{name:"title",text:"提示信息"},{name:"bind-value",text:"动态值",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-click",text:"点击事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"submit(html)":{xdoc:"<b>使用场景:</b>向指定地址提交表单内容;<br/><b>使用方法:</b>添加标签后，可以对页面表单输入的内容进行向指定地址的提交，或者自定义事件",properties:["xid","value","disabled","name",{name:"title",text:"提示信息"},{name:"bind-value",text:"动态值",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-click",text:"点击事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"input(html)":{xdoc:"<b>使用场景:</b>需要输入框时，比如商品数量选择;<br/><b>使用方法:</b>添加input(html)标签，绑定选定值的存储字段",properties:["xid","value","disabled","name","readonly",{name:"title",text:"提示信息"},{name:"bind-value",text:"动态文本",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-change",text:"值改变事件",editor:"eventEditor",noLabel:!0},{name:"bind-focus",text:"获取焦点事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"file(html)":{xdoc:"<b>使用场景:</b>需要上传文件、图片，例如附件上传;<br/><b>使用方法:</b>添加file(html)标签，绑定上传文件的存储字段，可以设置文件类型",properties:["xid","value",{name:"accept",text:"可接受文件类型"},"alt","disabled","name",{name:"title",text:"提示信息"},{name:"bind-value",text:"动态文本",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-change",text:"值改变事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"password(html)":{xdoc:"<b>使用场景:</b>密码输入框，不显示密码显示小点;<br/><b>使用方法:</b>添加password(html)标签，绑定输入值的存储字段",properties:["xid","value","align","alt","checked","disabled","maxlength","name",{name:"title",text:"提示信息"},{name:"bind-value",text:"动态文本",editor:"jSExpressionEditor",noLabel:!1}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"checkbox(html)":{properties:["xid","value","checked","disabled","name",{name:"title",text:"提示信息"},{name:"bind-value",text:"动态文本",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-change",text:"值改变事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"radio(html)":{properties:["xid","value","checked","disabled","name",{name:"title",text:"提示信息"},{name:"bind-value",text:"动态文本",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-change",text:"值改变事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"image(html)":{text:"静态图片",xdoc:"<b>使用场景:</b>所有需要使用图片来展示的场景都需要图像组件，如头像，Logo等;<br/><b>使用方法:</b>拖入设计器中，配置图像URL，也可动态绑定数据对象中的图像；可配置点击事件",styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]},templateContent:'<img src="$UI/system/designer/webIde/img/default.png" ></img>',properties:[{name:"src",editor:"imgSelector"},{name:"bind-attr-src",text:"动态URL"}],events:[{name:"bind-click",text:"点击事件",editor:"eventEditor",noLabel:!0}]},"textarea(html)":{xdoc:"<b>使用场景:</b>输入多行文本;<br/><b>使用方法:</b>添加textarea(html)标签，绑定输入值的存储字段，可以设置默认高度",properties:["xid","accessKey","cols","rows","disabled","name","readonly","text","tabindex",{name:"title",text:"提示信息"},{name:"bind-text",text:"动态文本",editor:"jSExpressionEditor",noLabel:!1}],events:[{name:"bind-change",text:"值改变事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"select(html)":{xdoc:"<b>使用场景:</b>下拉列表，例如选择所在省;<br/><b>使用方法:</b>添加select标签，并设置其属性bind-ref和下拉选择数据来源的data",properties:["xid","disabled","multiple","name","size",{name:"title",text:"提示信息"}],events:[{name:"bind-change",text:"值改变事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("param"),e.getCommonStyleItem("position")]}},"div(html)":{xdoc:"<b>使用场景:</b>块状布局;<br/><b>使用方法:</b>添加div标签，做成想要的布局，把布局中的内容放到div下",properties:[],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"span(html)":{xdoc:"<b>使用场景:</b>文本组件常用于大篇幅的文章;<br/><b>使用方法:</b>拖入设计器中，配置文本内容，也可绑定数据库内容；可配置显示的样式风格",properties:["text",{name:"bind",text:"动态绑定",properties:[{name:"bind-text",editor:"dataRef"},{name:"bind-visible",text:"动态显示",editor:"jSExpressionEditor"},{name:"bind-html",text:"动态展现",editor:"jSExpressionEditor"},{name:"bind-css",text:"动态Class",editor:"bindCssClassSelector"},{name:"bind-style",text:"动态样式",editor:"bindStyleSelector"}]}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"p(html)":{xdoc:"<b>使用场景:</b>段落标签，和前后的元素有一定的间距;<br/><b>使用方法:</b>添加p标签，指定p要展示的内容",properties:["xid","text"],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"i(html)":{xdoc:"<b>使用场景:</b>文字内容斜体展示，例如模仿注释文本;<br/><b>使用方法:</b>添加i标签，指定i要展示的内容",properties:["xid",{name:"class",text:"图标",editor:"selectIcon"}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"label(html)":{xdoc:"<b>使用场景:</b>一般配合表单项作为文字说明使用;<br/><b>使用方法:</b>拖入设计器中，配置文本内容，也可以配置动态文本",properties:["text","for",{name:"title",text:"提示信息"}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"ul(html)":{xdoc:"<b>使用场景:</b>无序列表，适用于有规则的级联展示;<br/><b>使用方法:</b>添加ul标签，再添加li来进行列表展示",properties:["xid",{name:"title",text:"提示信息"}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"li(html)":{xdoc:"<b>使用场景:</b>无序列表内容展示项;<br/><b>使用方法:</b>添加ul标签，再添加li来进行列表展示",properties:["xid","text",{name:"title",text:"提示信息"}],events:[{name:"bind-click",text:"点击事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"h1(html)":{xdoc:"<b>使用场景:</b>标题标签，定义字体为2em;<br/><b>使用方法:</b>添加h1标签，指定h1要展示的内容",properties:["xid","text"],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"h2(html)":{xdoc:"<b>使用场景:</b>标题标签，定义字体为1.5em;<br/><b>使用方法:</b>添加h2标签，指定h2要展示的内容",properties:["xid","text"],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"h3(html)":{xdoc:"<b>使用场景:</b>标题标签，定义字体为1.17em;<br/><b>使用方法:</b>添加h3标签，指定h3要展示的内容",properties:["xid","text"],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"h4(html)":{xdoc:"<b>使用场景:</b>标题标签，定义字体为1em;<br/><b>使用方法:</b>添加h4标签，指定h4要展示的内容",properties:["xid","text"],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"h5(html)":{xdoc:"<b>使用场景:</b>标题标签，定义字体为0.83em;<br/><b>使用方法:</b>添加h5标签，指定h5要展示的内容",properties:["xid","text"],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"a(html)":{xdoc:"<b>使用场景:</b>跳转链接或锚点等;<br/><b>使用方法:</b>添加a(html)标签，指定a(html)要跳转的页面或锚点，以及页面的打开方式",properties:["xid","href","target","text",{name:"title",text:"提示信息"}],events:[{name:"bind-click",text:"点击事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"fieldset(html)":{xdoc:"<b>使用场景:</b>表单内的相关元素分组;<br/><b>使用方法:</b>添加fieldset标签，在fieldset分组下放入该分组的表单元素",properties:["xid","legend","align",{name:"title",text:"提示信息"}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"button(html)":{xdoc:"<b>使用场景:</b>页面需要按钮时;<br/><b>使用方法:</b>添加button(html)标签，添加按钮的事件",properties:["xid","text","type",{name:"title",text:"提示信息"},"name","value","disabled","tabindex"],events:[{name:"bind-click",text:"点击事件",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("pull"),e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"iframe(html)":{xdoc:"<b>使用场景:</b>嵌入一个外部页面或同一片段重用;<br/><b>使用方法:</b>添加iframe(html)标签，指定要嵌入的页面路径",properties:["xid",{name:"src",text:"内嵌URL"},{name:"srcdoc",text:"html内容"},{name:"longdesc",text:"描述URL"},"name",{name:"scrolling",text:"显示滚动条"},{name:"frameborder",text:"显示边框"}],events:[{name:"bind-load",text:"加载成功时",editor:"eventEditor",noLabel:!0}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"form(html)":{xdoc:"<b>使用场景:</b>向服务器提交内容，登录、注册;<br/><b>使用方法:</b>添加from标签，在form下添加要向服务器传送的内容",properties:["xid",{name:"action",text:"提交表单至"},{name:"method",text:"提交方式"},{name:"target",text:"打开页面方式"},{name:"name",text:"表单名称"},{name:"enctype",text:"编码方式"},{name:"autocomplete",text:"自动填充"},{name:"novalidate",text:"是否验证"}],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle"),e.getCommonStyleItem("font"),e.getCommonStyleItem("border"),e.getCommonStyleItem("position")]}},"hr(html)":{xdoc:"<b>使用场景:</b>上下的元素需要有分割线时;<br/><b>使用方法:</b>把hr(html)标签添加在上下两个元素中间",properties:["xid"],styleConfig:function(e){return[e.getCommonStyleItem("baseStyle")]}}};return{"label(html)":s,"image(html)":o,quickIdeEx:u}}),define("$model/UI2/system/components/justep/common/designer/common",["require","jquery","css!./css/common"],function(e){var t=e("jquery");return e("css!./css/common").load(),{attr2js:function(e,n){if(t.isArray(n)){var r={},i=!1;for(var s=0;s<n.length;s++){var o=e[0].getAttribute(n[s]);o&&(r[n[s]]=o,i=!0)}return i?r:null}}}}),define("$model/UI2/system/designer/xui/jqueryEx",["require","jquery"],function(e){function n(e,n){return this.each(function(){if(typeof n!="string")return;var r=t.parseXml(n).firstChild.cloneNode(!0);switch(e){case"append":this.appendChild(r);break;case"prepend":this.childNodes.length>0?this.insertBefore(r,this.firstChild):this.appendChild(r);break;case"after":this.nextSibling?this.parentNode.insertBefore(r,this.nextSibling):this.parentNode.appendChild(r);break;case"before":this.parentNode.insertBefore(r,this)}})}var t=e("jquery");return t.fn.extend({firstChild:function(){return this.children().first()},firstElement:function(){return this.children()[0]},lastChild:function(){return t(this).children().last()},lastElement:function(){return t(this).children().last().get(0)},prevElement:function(){return t(this).prev().get(0)},nextElement:function(){return t(this).next().get(0)},findChildByPath:function(e){var n=e.split("/"),r=t(this)[0];if(!r)return;for(var i=0;i<n.length;i+=1){var s=n[i],o=r.childNodes,u=!1;for(var a=0;a<o.length;a+=1)if(o[a].tagName==s){r=o[a],u=!0;break}if(!u)return}return r},getBound:function(e){var n=t(this),r=n.outerWidth(),i=n.outerHeight(),s=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10),u=parseInt(n.css("margin-right"),10),a=parseInt(n.css("margin-bottom"),10),f=e?n.position():n.offset(),l=f.left,c=f.top;return l!==0&&!l&&(l=n[0].offsetLeft),c!==0&&!c&&(c=n[0].offsetTop),{x:parseInt(l)-6,y:parseInt(c)-6,w:r,h:i}},getInnerBound:function(e){var n=t(this),r=n.width(),i=n.height();this.tagName=="IMG"||this.tagName=="IMAGE";var s=e?n.offset():n.position();return{x:parseInt(s.left||this.offsetLeft),y:parseInt(s.top||this.offsetTop),w:r,h:i}},setBound:function(e){var n=t(this)[0];if(n){n.style.position=="absolute"&&(e.y&&(n.style.top=e.y+"px"),e.x&&(n.style.left=e.x+"px"));if(e.w&&(""+e.w).indexOf("%")!=-1)n.style.width=e.w;else if(e.w&&t(n).width()!=e.w){t(n).width(e.w<1?1:e.w);var r=t(n).outerWidth()-t(n).width();r>0&&t(n).width()<e.w&&t(n).width(e.w+r)}if(e.h&&(""+e.h).indexOf("%")!=-1)n.style.height=e.h;else if(e.h&&t(n).height()!=e.h){t(n).height(e.h<1?1:e.h);var r=t(n).outerHeight()-t(n).height();r>0&&t(n).height()<e.h&&t(n).height(e.h+r)}}},getParentScrollTop:function(){var e=this[0],t=0;while(e)e.scrollTop&&(t+=e.scrollTop),e=e.parentNode;return t},getParentScrollLeft:function(){var e=this[0],t=0;while(e)e.scrollLeft&&(t+=e.scrollLeft),e=e.parentNode;return t},isEmptyNode:function(){var e=this;if(e.innerText&&e.innerText!="&nbsp")return!1;var t=e.childNodes;if(t==null||t.length==0)return!0;for(var n=0;n<t.length;n++)if(t[n].nodeType==1)return!1;return!0},canMove:function(e){var n=t(this)[0];return e!==undefined&&e!=null&&n.setAttribute("d_canMove",e),n.getAttribute("d_canMove")=="false"?!1:n.getAttribute("d_isHtmlTag")=="true"||n.getAttribute("component")?!0:!0},selectable:function(e){var n=t(this)[0];return e!==undefined&&e!=null&&n.setAttribute("d_selectable",e),n.getAttribute("d_selectable")!="false"},bindEx:function(e,t){},resizable:function(e){var n=t(this)[0];return e!==undefined&&e!=null&&n.setAttribute("d_resizable",e),n.getAttribute("d_resizable")!="false"},canAddChild:function(e){var n=t(this)[0];return e!==undefined&&e!=null&&n.setAttribute("d_canAddChild",e),n.getAttribute("d_canAddChild")!="false"},getCData:function(){var e=t(this)[0];if(!e)return"";var n=e.childNodes,r=[];for(var i=0;i<n.length;i+=1)n[i].nodeType==4&&r.push(n[i].nodeValue);return r.join("\n")},getPath:function(){var e=t(this)[0];if(!e)return"";var n=[],r=e.parentNode;while(r&&r.nodeType==1){var i=r.tagName;r.getAttribute("d_id")?i=i+"[d_id='"+r.getAttribute("d_id")+"']":i="*:eq("+t(r).index()+")",n.splice(0,0,i+">");if(r.getAttribute("d_id"))break;r=r.parentNode}return n.push("*:eq("+t(this).index()+")"),n.join("")},appendXml:function(e){return n.call(this,"append",e)},prependXml:function(e){return n.call(this,"prepend",e)},afterXml:function(e){return n.call(this,"after",e)},beforeXml:function(e){return n.call(this,"before",e)},xml:function(){var e=this[0];return e.xml||(new XMLSerializer).serializeToString(e)},innerXml:function(){var e=this.xml(),t=e.indexOf(">"),n=e.lastIndexOf("<");return n>t?e.substring(t+1,n):""}}),t.extend(t,{createElement:function(e,n,r,i){var s;if(i)return s=t(e),t(i).before(s),s[0];if(r)return s=t(e).appendTo(r),n.resizable&&s.resizable(n.resizable+""),n.canAddChild&&s.canAddChild(n.canAddChild+""),n.selectable?s.selectable(n.selectable+""):s.selectable("true"),s[0]},parseXml:function(e){try{var t=(new DOMParser).parseFromString(e,"text/xml");return t}catch(n){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(e),t}},toXml:function(e,n,r){var i=t(t.parseXml("<"+n+" />")),s=i.find(":first");for(var o in e)r?s.attr(o,e[o]):s.appendXml("<"+o+" />").find(o).text(e[o]);return i[0]},getUrlParam:function(e){var t=decodeURI(window.location.href),n=t.indexOf("?"),r=t.substring(n+1);if(r){r=r.split("&");for(var i=0;i<r.length;i+=1){var s=r[i].split("=");if(s[0]==e)return s[1]}}},loadCss:function(e){e.substring(0,1)=="/"&&(e="../../../../../model"+e);var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e+"?version="+(new Date).getTime()),t.appendChild(n)},justep:{extend:function(){var e=function(e){for(var t in e)this[t]=e[t]},n=Object.prototype.constructor;return function(r,i,s){typeof i=="object"&&(s=i,i=r,r=s.constructor!=n?s.constructor:function(){i.apply(this,arguments)});var o=function(){},u,a=i.prototype;return o.prototype=a,u=r.prototype=new o,u.constructor=r,r.superclass=a,a.constructor==n&&(a.constructor=i),r.override=function(e){t.justep.override(r,e)},u.override=e,t.justep.override(r,s),r}}(),override:function(e,t){if(t){var n=e.prototype;for(var r in t)n[r]=t[r]}}}}),t});